/Users/yeagerd/github/briefly/.venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'fields' has been removed
  warnings.warn(message, UserWarning)
{
  "openapi": "3.1.0",
  "info": {
    "title": "Briefly Shipments Service",
    "description": "Package shipment tracking microservice for Briefly with carrier integration and label management",
    "contact": {
      "name": "Briefly Team",
      "email": "support@briefly.ai"
    },
    "license": {
      "name": "Private"
    },
    "version": "0.1.0"
  },
  "paths": {
    "/v1/shipments/packages/": {
      "get": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "List Packages",
        "description": "List packages with cursor-based pagination.\n\nThis endpoint uses cursor-based pagination instead of offset-based pagination\nfor better performance and consistency with concurrent updates.",
        "operationId": "list_packages_v1_shipments_packages__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Cursor"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Limit"
            }
          },
          {
            "name": "direction",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": "next",
              "title": "Direction"
            }
          },
          {
            "name": "carrier",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "tracking_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Tracking Number"
            }
          },
          {
            "name": "email_message_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Email Message Id"
            }
          },
          {
            "name": "date_range",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date Range"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Add Package",
        "operationId": "add_package_v1_shipments_packages__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PackageCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages": {
      "get": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "List Packages",
        "description": "List packages with cursor-based pagination.\n\nThis endpoint uses cursor-based pagination instead of offset-based pagination\nfor better performance and consistency with concurrent updates.",
        "operationId": "list_packages_v1_shipments_packages_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Cursor"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Limit"
            }
          },
          {
            "name": "direction",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": "next",
              "title": "Direction"
            }
          },
          {
            "name": "carrier",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Carrier"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "tracking_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Tracking Number"
            }
          },
          {
            "name": "email_message_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Email Message Id"
            }
          },
          {
            "name": "date_range",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Date Range"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Add Package",
        "operationId": "add_package_v1_shipments_packages_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PackageCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/{id}": {
      "get": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Get Package",
        "operationId": "get_package_v1_shipments_packages__id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Update Package",
        "operationId": "update_package_v1_shipments_packages__id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PackageUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PackageOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Delete Package",
        "operationId": "delete_package_v1_shipments_packages__id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Package V1 Shipments Packages  Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/{id}/refresh": {
      "post": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Refresh Package",
        "operationId": "refresh_package_v1_shipments_packages__id__refresh_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Refresh Package V1 Shipments Packages  Id  Refresh Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/{id}/labels": {
      "post": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Add Label To Package",
        "operationId": "add_label_to_package_v1_shipments_packages__id__labels_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Add Label To Package V1 Shipments Packages  Id  Labels Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/{id}/labels/{label_id}": {
      "delete": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Remove Label From Package",
        "operationId": "remove_label_from_package_v1_shipments_packages__id__labels__label_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          },
          {
            "name": "label_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Label Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Remove Label From Package V1 Shipments Packages  Id  Labels  Label Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/collect-data": {
      "post": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Collect Shipment Data",
        "description": "Collect user-corrected shipment data for service improvements\n\nThis endpoint stores:\n- Original email content\n- Auto-detected shipment information\n- User corrections and improvements\n- Detection confidence scores\n\nThis data is used to improve the accuracy of future shipment detection.",
        "operationId": "collect_shipment_data_v1_shipments_packages_collect_data_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DataCollectionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataCollectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/shipments/packages/collection-stats": {
      "get": {
        "tags": [
          "Shipments",
          "Packages"
        ],
        "summary": "Get Collection Stats",
        "description": "Get statistics about data collection (for admin/monitoring purposes)",
        "operationId": "get_collection_stats_v1_shipments_packages_collection_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Collection Stats V1 Shipments Packages Collection Stats Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/shipments/labels/": {
      "get": {
        "tags": [
          "Shipments",
          "Labels"
        ],
        "summary": "List Labels",
        "description": "List all labels for the authenticated user.\n\n**Authentication:**\n- Requires user authentication (JWT token or gateway headers)\n- Returns only labels owned by the authenticated user\n- Requires service API key for service-to-service calls",
        "operationId": "list_labels_v1_shipments_labels__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/LabelOut"
                  },
                  "type": "array",
                  "title": "Response List Labels V1 Shipments Labels  Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Shipments",
          "Labels"
        ],
        "summary": "Create Label",
        "description": "Create a new label for the authenticated user.\n\n**Authentication:**\n- Requires user authentication (JWT token or gateway headers)\n- User ownership is automatically derived from authenticated user context\n- Requires service API key for service-to-service calls",
        "operationId": "create_label_v1_shipments_labels__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LabelCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LabelOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/shipments/labels/{id}": {
      "put": {
        "tags": [
          "Shipments",
          "Labels"
        ],
        "summary": "Update Label",
        "operationId": "update_label_v1_shipments_labels__id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LabelUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LabelOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Shipments",
          "Labels"
        ],
        "summary": "Delete Label",
        "operationId": "delete_label_v1_shipments_labels__id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Label V1 Shipments Labels  Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/carriers/": {
      "get": {
        "tags": [
          "Shipments",
          "Carriers"
        ],
        "summary": "List Carriers",
        "description": "List carrier configurations.\n\n**Authentication:**\n- Requires user authentication (JWT token or gateway headers)\n- Requires service API key for service-to-service calls\n- Note: Carrier configs are typically system-wide, not user-specific",
        "operationId": "list_carriers_v1_shipments_carriers__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/CarrierConfigOut"
                  },
                  "type": "array",
                  "title": "Response List Carriers V1 Shipments Carriers  Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/shipments/packages/{package_id}/events": {
      "get": {
        "tags": [
          "Shipments",
          "Package Events"
        ],
        "summary": "Get Tracking Events",
        "operationId": "get_tracking_events_v1_shipments_packages__package_id__events_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Package Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TrackingEventOut"
                  },
                  "title": "Response Get Tracking Events V1 Shipments Packages  Package Id  Events Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Shipments",
          "Package Events"
        ],
        "summary": "Create Tracking Event",
        "operationId": "create_tracking_event_v1_shipments_packages__package_id__events_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Package Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackingEventCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TrackingEventOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/packages/{package_id}/events/{event_id}": {
      "delete": {
        "tags": [
          "Shipments",
          "Package Events"
        ],
        "summary": "Delete Tracking Event",
        "description": "Delete a tracking event by ID\n\nValidates that the user owns the package associated with the tracking event\nbefore allowing deletion.",
        "operationId": "delete_tracking_event_v1_shipments_packages__package_id__events__event_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Package Id"
            }
          },
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Tracking Event V1 Shipments Packages  Package Id  Events  Event Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/events": {
      "get": {
        "tags": [
          "Shipments",
          "Events"
        ],
        "summary": "Get Events By Email",
        "description": "Get tracking events by email message ID\n\nThis endpoint allows the frontend to check if an email has associated shipment events\nand display the appropriate UI indicators (e.g., green-filled shipping truck icon).",
        "operationId": "get_events_by_email_v1_shipments_events_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "email_message_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Email message ID to search for",
              "title": "Email Message Id"
            },
            "description": "Email message ID to search for"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TrackingEventOut"
                  },
                  "title": "Response Get Events By Email V1 Shipments Events Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/shipments/events/from-email": {
      "post": {
        "tags": [
          "Shipments",
          "Events"
        ],
        "summary": "Parse Email From Event",
        "description": "Parse email content to detect shipment information and create events\n\nThis endpoint analyzes email content to identify shipment information\nand can optionally create tracking events from the parsed data.",
        "operationId": "parse_email_from_event_v1_shipments_events_from_email_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailParseRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailParseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "summary": "Health",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Health Health Get"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CarrierConfigOut": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "carrier_name": {
            "type": "string",
            "title": "Carrier Name"
          },
          "api_endpoint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Api Endpoint"
          },
          "rate_limit_per_hour": {
            "type": "integer",
            "title": "Rate Limit Per Hour"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "email_patterns": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Patterns"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "carrier_name",
          "api_endpoint",
          "rate_limit_per_hour",
          "is_active",
          "email_patterns",
          "created_at"
        ],
        "title": "CarrierConfigOut"
      },
      "DataCollectionRequest": {
        "properties": {
          "email_message_id": {
            "type": "string",
            "title": "Email Message Id",
            "description": "Original email message ID"
          },
          "original_email_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Original Email Data",
            "description": "Original email content"
          },
          "auto_detected_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Auto Detected Data",
            "description": "Auto-detected shipment data"
          },
          "user_corrected_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "User Corrected Data",
            "description": "User-corrected shipment data"
          },
          "detection_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Detection Confidence",
            "description": "Original detection confidence"
          },
          "correction_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Reason",
            "description": "Reason for user correction"
          },
          "consent_given": {
            "type": "boolean",
            "title": "Consent Given",
            "description": "Whether user has given consent for data collection"
          }
        },
        "type": "object",
        "required": [
          "email_message_id",
          "original_email_data",
          "auto_detected_data",
          "user_corrected_data",
          "detection_confidence",
          "consent_given"
        ],
        "title": "DataCollectionRequest",
        "description": "Request schema for collecting user-corrected shipment data"
      },
      "DataCollectionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether data collection was successful"
          },
          "collection_id": {
            "type": "string",
            "title": "Collection Id",
            "description": "Unique identifier for this data collection entry"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the data was collected"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "collection_id",
          "timestamp",
          "message"
        ],
        "title": "DataCollectionResponse",
        "description": "Response schema for data collection"
      },
      "EmailParseRequest": {
        "properties": {
          "subject": {
            "type": "string",
            "title": "Subject",
            "description": "Email subject line"
          },
          "sender": {
            "type": "string",
            "title": "Sender",
            "description": "Email sender address"
          },
          "body": {
            "type": "string",
            "title": "Body",
            "description": "Email body content (HTML or text)"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type: 'text' or 'html'",
            "default": "text"
          }
        },
        "type": "object",
        "required": [
          "subject",
          "sender",
          "body"
        ],
        "title": "EmailParseRequest",
        "description": "Request schema for email parsing",
        "example": {
          "body": "Your order #123-4567890-1234567 has shipped via UPS. Tracking number: 1Z999AA1234567890",
          "content_type": "text",
          "sender": "shipment-tracking@amazon.com",
          "subject": "Your Amazon order has shipped"
        }
      },
      "EmailParseResponse": {
        "properties": {
          "is_shipment_email": {
            "type": "boolean",
            "title": "Is Shipment Email",
            "description": "Whether this appears to be a shipment email"
          },
          "detected_carrier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Carrier",
            "description": "Primary detected carrier"
          },
          "tracking_numbers": {
            "items": {
              "$ref": "#/components/schemas/ParsedTrackingInfo"
            },
            "type": "array",
            "title": "Tracking Numbers",
            "description": "List of tracking numbers found"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Overall confidence score"
          },
          "detected_from": {
            "type": "string",
            "title": "Detected From",
            "description": "Where detection was based: 'sender', 'subject', 'body', or 'multiple'"
          },
          "suggested_package_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Package Data",
            "description": "Suggested package data for creating tracking entry"
          }
        },
        "type": "object",
        "required": [
          "is_shipment_email",
          "confidence",
          "detected_from"
        ],
        "title": "EmailParseResponse",
        "description": "Response schema for email parsing",
        "example": {
          "confidence": 0.85,
          "detected_carrier": "amazon",
          "detected_from": "multiple",
          "is_shipment_email": true,
          "suggested_package_data": {
            "carrier": "ups",
            "status": "in_transit",
            "tracking_number": "1Z999AA1234567890"
          },
          "tracking_numbers": [
            {
              "carrier": "ups",
              "confidence": 0.95,
              "source": "body",
              "tracking_number": "1Z999AA1234567890"
            }
          ]
        }
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LabelCreate": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Color",
            "default": "#3B82F6"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "LabelCreate"
      },
      "LabelOut": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "color": {
            "type": "string",
            "title": "Color"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "name",
          "color",
          "created_at"
        ],
        "title": "LabelOut"
      },
      "LabelUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Color"
          }
        },
        "type": "object",
        "required": [
          "name",
          "color"
        ],
        "title": "LabelUpdate"
      },
      "PackageCreate": {
        "properties": {
          "tracking_number": {
            "type": "string",
            "title": "Tracking Number"
          },
          "carrier": {
            "type": "string",
            "title": "Carrier"
          },
          "status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PackageStatus"
              },
              {
                "type": "null"
              }
            ],
            "default": "PENDING"
          },
          "estimated_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Delivery"
          },
          "actual_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Delivery"
          },
          "recipient_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Name"
          },
          "shipper_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shipper Name"
          },
          "package_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Package Description"
          },
          "order_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Number"
          },
          "tracking_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracking Link"
          },
          "email_message_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Message Id"
          }
        },
        "type": "object",
        "required": [
          "tracking_number",
          "carrier"
        ],
        "title": "PackageCreate"
      },
      "PackageListResponse": {
        "properties": {
          "packages": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Packages",
            "description": "List of packages"
          },
          "next_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Cursor",
            "description": "Cursor token for next page"
          },
          "prev_cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Prev Cursor",
            "description": "Cursor token for previous page"
          },
          "has_next": {
            "type": "boolean",
            "title": "Has Next",
            "description": "Whether there are more packages after this page"
          },
          "has_prev": {
            "type": "boolean",
            "title": "Has Prev",
            "description": "Whether there are packages before this page"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Number of packages per page"
          }
        },
        "type": "object",
        "required": [
          "packages",
          "has_next",
          "has_prev",
          "limit"
        ],
        "title": "PackageListResponse",
        "description": "Response schema for package listing with cursor pagination."
      },
      "PackageOut": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "tracking_number": {
            "type": "string",
            "title": "Tracking Number"
          },
          "carrier": {
            "type": "string",
            "title": "Carrier"
          },
          "status": {
            "$ref": "#/components/schemas/PackageStatus"
          },
          "estimated_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Delivery"
          },
          "actual_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Delivery"
          },
          "recipient_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Name"
          },
          "shipper_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shipper Name"
          },
          "package_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Package Description"
          },
          "order_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Number"
          },
          "tracking_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracking Link"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "events_count": {
            "type": "integer",
            "title": "Events Count"
          },
          "labels": {
            "items": {
              "$ref": "#/components/schemas/LabelOut"
            },
            "type": "array",
            "title": "Labels"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "tracking_number",
          "carrier",
          "status",
          "estimated_delivery",
          "actual_delivery",
          "recipient_name",
          "shipper_name",
          "package_description",
          "order_number",
          "tracking_link",
          "updated_at",
          "events_count",
          "labels"
        ],
        "title": "PackageOut"
      },
      "PackageStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "IN_TRANSIT",
          "OUT_FOR_DELIVERY",
          "DELIVERED",
          "EXCEPTION",
          "DELAYED",
          "CANCELLED",
          "RETURNED"
        ],
        "title": "PackageStatus"
      },
      "PackageUpdate": {
        "properties": {
          "status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/PackageStatus"
              },
              {
                "type": "null"
              }
            ]
          },
          "estimated_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Delivery"
          },
          "actual_delivery": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Actual Delivery"
          },
          "recipient_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Recipient Name"
          },
          "shipper_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Shipper Name"
          },
          "package_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Package Description"
          },
          "order_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Order Number"
          },
          "tracking_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracking Link"
          },
          "archived_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Archived At"
          }
        },
        "type": "object",
        "required": [
          "status",
          "estimated_delivery",
          "actual_delivery",
          "recipient_name",
          "shipper_name",
          "package_description",
          "order_number",
          "tracking_link",
          "archived_at"
        ],
        "title": "PackageUpdate"
      },
      "ParsedTrackingInfo": {
        "properties": {
          "tracking_number": {
            "type": "string",
            "title": "Tracking Number",
            "description": "Extracted tracking number"
          },
          "carrier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carrier",
            "description": "Detected carrier name"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence score for this detection"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Where this information was found: 'subject', 'body', or 'both'"
          }
        },
        "type": "object",
        "required": [
          "tracking_number",
          "confidence",
          "source"
        ],
        "title": "ParsedTrackingInfo",
        "description": "Individual tracking information found in email"
      },
      "TrackingEventCreate": {
        "properties": {
          "event_date": {
            "type": "string",
            "format": "date-time",
            "title": "Event Date"
          },
          "status": {
            "$ref": "#/components/schemas/PackageStatus"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "email_message_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email Message Id"
          }
        },
        "type": "object",
        "required": [
          "event_date",
          "status"
        ],
        "title": "TrackingEventCreate"
      },
      "TrackingEventOut": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "event_date": {
            "type": "string",
            "format": "date-time",
            "title": "Event Date"
          },
          "status": {
            "$ref": "#/components/schemas/PackageStatus"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_date",
          "status",
          "location",
          "description",
          "created_at"
        ],
        "title": "TrackingEventOut"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "packages",
      "description": "Package management and tracking operations"
    },
    {
      "name": "labels",
      "description": "Shipping label generation and management"
    },
    {
      "name": "carriers",
      "description": "Carrier configuration and integration"
    },
    {
      "name": "events",
      "description": "Shipment event tracking and management"
    }
  ]
}
